var Referential=function(){"use strict";var t,e,n,r,i,o,u=[].slice;t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)},i=function(){var t,e,n,r,i,o,u,l,c,a;try{if(!Object.assign)return!1;if(l=new String("abc"),l[5]="de","5"===Object.getOwnPropertyNames(l)[0])return!1;for(c={},t=e=0;e<=9;t=++e)c["_"+String.fromCharCode(t)]=t;if(o=Object.getOwnPropertyNames(c).map(function(t){return c[t]}),"0123456789"!==o.join(""))return!1;for(a={},u="abcdefghijklmnopqrst".split(""),n=0,r=u.length;n<r;n++)i=u[n],a[i]=i;return"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(t){return t,!1}};var l,c,a,s,h=n=function(){return i()?Object.assign:function(){var n,i,l,c,a,s,h,f,p,g,y,b;for(y=arguments[0],p=2<=arguments.length?u.call(arguments,1):[],b=o(y),i=0,a=p.length;i<a;i++){f=p[i],n=Object(f);for(c in n)e.call(n,c)&&(b[c]=n[c]);if(t)for(h=t(n),l=0,s=h.length;l<s;l++)g=h[l],r.call(n,g)&&(b[g]=n[g])}return b}}();c=Object.prototype,a=c.hasOwnProperty,s=c.toString,"function"==typeof Symbol&&Symbol.prototype.valueOf;var f,p,g=function(t){return!!t&&!b(t)&&a.call(t,"length")&&isFinite(t.length)&&v(t.length)&&t.length>=0},y=Array.isArray||function(t){return"[object Array]"===s.call(t)},b=function(t){return"[object Boolean]"===s.call(t)},v=(l=function(t){var e;return"undefined"!=typeof window&&t===window.alert||("[object Function]"===(e=s.call(t))||"[object GeneratorFunction]"===e||"[object AsyncFunction]"===e)},function(t){return"[object Number]"===s.call(t)}),d=function(t){return"[object Object]"===s.call(t)},j=function(t){t=t||{};var e={},n=Array.prototype.slice;return Object.defineProperties(t,{on:{value:function(n,r){return"function"==typeof r&&(e[n]=e[n]||[]).push(r),t},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){if("*"!=n||r)if(r)for(var i,o=e[n],u=0;i=o&&o[u];++u)i==r&&o.splice(u--,1);else delete e[n];else e={};return t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var i,o,u,l=arguments.length-1,c=new Array(l);for(u=0;u<l;u++)c[u]=arguments[u+1];for(i=n.call(e[r]||[],0),u=0;o=i[u];++u)o.apply(t,c);return e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(c)),t},enumerable:!1,writable:!1,configurable:!1}}),t};p=function(){var t;return t=0,function(){return t++}}();var _,w,O=f=function(){function t(t,e,n){this._value=t,this.parent=e,this.key=n,this._cache={},this._children={},this._id=p(),null!=this.parent&&(this.parent._children[this._id]=this),j(this)}return t.prototype._mutate=function(t){var e,n,r;this._cache={},r=this._children;for(n in r)e=r[n],e._mutate();return this},t.prototype.destroy=function(){var t,e,n;n=this._children;for(e in n)t=n[e],t.destroy();return delete this._cache,delete this._children,delete this.parent._children[this._id],this},t.prototype.value=function(t){return this.parent?null!=t?this.parent.set(this.key,t):this.parent.get(this.key):(null!=t&&(this._value=t),this._value)},t.prototype.ref=function(e){return e?new t(null,this,e):this},t.prototype.get=function(t){return t?this._cache[t]?this._cache[t]:this._cache[t]=this.index(t):this.value()},t.prototype.set=function(t,e){var n,r,i;if(d(t)){for(n in t)i=t[n],this.set(n,i);return this}return r=this.get(t),this._mutate(t),null==e?this.value(h(this.value(),t)):this.index(t,e),this._triggerSet(t,e,r),this},t.prototype._triggerSet=function(t,e,n){var r;if(this.trigger("set",t,e,n),this.parent)return r=this.key+"."+t,this.parent._triggerSet(r,e,n)},t.prototype.extend=function(t,e){var n;return this._mutate(t),null==e?this.value(h(this.value(),t)):d(e)?this.value(h(this.ref(t).get(),e)):(n=this.clone(),this.set(t,e),this.value(h(n.get(),this.value()))),this},t.prototype.clone=function(e){return new t(h({},this.get(e)))},t.prototype.index=function(t,e,n,r){var i,o,u;if(null==n&&(n=this.value()),this.parent)return this.parent.index(this.key+"."+t,e);if(v(t)&&(t=String(t)),u=t.split("."),null!=e)for(;o=u.shift();){if(!u.length)return n[o]=e;i=u[0],null==n[o]&&(isNaN(Number(i))?null==n[o]&&(n[o]={}):null==n[o]&&(n[o]=[])),n=n[o]}else for(;o=u.shift();){if(!u.length)return null!=n?n[o]:void 0;n=null!=n?n[o]:void 0}},t}();return _=["extend","get","index","ref","set","value","on","off","one","trigger"],w=function(t,e){var n,r,i,o,u;for(null==e&&(e=null),null==e&&(e=new O(t)),u=function(t){return e.get(t)},n=function(t){return u[t]=function(){return e[t].apply(e,arguments)}},r=0,i=_.length;r<i;r++)o=_[r],n(o);return u.refer=function(t){return w(null,e.ref(t))},u.clone=function(t){return w(null,e.clone(t))},u},w.Ref=O,w}();
