var Referential=function(){"use strict";var t,e,n,r,i,u,l=[].slice;t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,u=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)},i=function(){var t,e,n,r,i,u,l,o,c,s;try{if(!Object.assign)return!1;if(o=new String("abc"),o[5]="de","5"===Object.getOwnPropertyNames(o)[0])return!1;for(c={},t=e=0;e<=9;t=++e)c["_"+String.fromCharCode(t)]=t;if(u=Object.getOwnPropertyNames(c).map(function(t){return c[t]}),"0123456789"!==u.join(""))return!1;for(s={},l="abcdefghijklmnopqrst".split(""),n=0,r=l.length;n<r;n++)i=l[n],s[i]=i;return"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(t){return t,!1}};var o,c,s,a,h=n=function(){return i()?Object.assign:function(){var n,i,o,c,s,a,h,f,p,y,d,g;for(d=arguments[0],p=2<=arguments.length?l.call(arguments,1):[],g=u(d),i=0,s=p.length;i<s;i++){f=p[i],n=Object(f);for(c in n)e.call(n,c)&&(g[c]=n[c]);if(t)for(h=t(n),o=0,a=h.length;o<a;o++)y=h[o],r.call(n,y)&&(g[y]=n[y])}return g}}();c=Object.prototype,s=c.hasOwnProperty,a=c.toString,"function"==typeof Symbol&&Symbol.prototype.valueOf;var f,p,y=function(t){return!!t&&!g(t)&&s.call(t,"length")&&isFinite(t.length)&&v(t.length)&&t.length>=0},d=(isArgs=function(t){var e,n;return n="[object Arguments]"===a.call(t),e=!d(t)&&y(t)&&b(t)&&o(t.callee),n||e},Array.isArray||function(t){return"[object Array]"===a.call(t)}),g=function(t){return"[object Boolean]"===a.call(t)},v=(o=function(t){var e;return"undefined"!=typeof window&&t===window.alert||("[object Function]"===(e=a.call(t))||"[object GeneratorFunction]"===e||"[object AsyncFunction]"===e)},function(t){return"[object Number]"===a.call(t)}),b=function(t){return"[object Object]"===a.call(t)};p=function(){var t;return t=0,function(){return t++}}();var j,_=f=function(){function t(t,e,n){this._value=t,this.parent=e,this.key=n,this._cache={},this._children={},this._id=p(),null!=this.parent&&(this.parent._children[this._id]=this)}return t.prototype._mutate=function(t){var e,n,r;this._cache={},r=this._children;for(n in r)e=r[n],e._mutate();return this},t.prototype.destroy=function(){var t,e,n;n=this._children;for(e in n)t=n[e],t.destroy();return delete this._cache,delete this._children,delete this.parent._children[this._id],this},t.prototype.value=function(t){return this.parent?null!=t?this.parent.set(this.key,t):this.parent.get(this.key):(null!=t&&(this._value=t),this._value)},t.prototype.ref=function(e){return e?new t(null,this,e):this},t.prototype.get=function(t){return t?this._cache[t]?this._cache[t]:this._cache[t]=this.index(t):this.value()},t.prototype.set=function(t,e){return this._mutate(t),null==e?this.value(h(this.value(),t)):this.index(t,e),this},t.prototype.extend=function(t,e){var n;return this._mutate(t),null==e?this.value(h(this.value(),t)):b(e)?this.value(h(this.ref(t).get(),e)):(n=this.clone(),this.set(t,e),this.value(h(n.get(),this.value()))),this},t.prototype.clone=function(e){return new t(h({},this.get(e)))},t.prototype.index=function(t,e,n,r){var i,u,l;if(null==n&&(n=this.value()),this.parent)return this.parent.index(this.key+"."+t,e);if(v(t)&&(t=String(t)),l=t.split("."),null!=e)for(;u=l.shift();){if(!l.length)return n[u]=e;i=l[0],null==n[u]&&(isNaN(Number(i))?null==n[u]&&(n[u]={}):null==n[u]&&(n[u]=[])),n=n[u]}else for(;u=l.shift();){if(!l.length)return null!=n?n[u]:void 0;n=null!=n?n[u]:void 0}},t}();return j=function(t,e){var n,r,i,u,l,o;for(null==e&&(e=null),null==e&&(e=new _(t)),o=function(t){return e.get(t)},l=["value","get","set","extend","index","ref"],n=function(t){return o[t]=function(){return e[t].apply(e,arguments)}},r=0,i=l.length;r<i;r++)u=l[r],n(u);return o.refer=function(t){return j(null,e.ref(t))},o.clone=function(t){return j(null,e.clone(t))},o},j.Ref=_,j}();
